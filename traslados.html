<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PROFORMA COMERCIAL | Industrias Tobias S.A.</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&family=Inter:wght@300;400;500;600&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --white: #ffffff;
            --off-white: #fafafa;
            --light-gray: #f5f5f5;
            --border-gray: #e5e5e5;
            --medium-gray: #9ca3af;
            --dark-gray: #4b5563;
            --charcoal: #1f2937;
            --black: #111827;
            --accent: #c9a962;
            --accent-light: #e8dcc4;
            --success: #059669;
            --danger: #dc2626;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--light-gray);
            color: var(--charcoal);
            line-height: 1.6;
            min-height: 100vh;
            padding: 40px 20px;
        }
        
        .document {
            max-width: 210mm;
            margin: 0 auto;
            background: var(--white);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid var(--border-gray);
        }
        
        /* Header Elegante */
        .doc-header {
            background: var(--white);
            padding: 50px 60px;
            border-bottom: 3px double var(--accent);
            position: relative;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
        }
        
        .brand-section {
            flex: 1;
        }
        
        .company-name {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2.4em;
            font-weight: 600;
            color: var(--black);
            letter-spacing: 4px;
            text-transform: uppercase;
            margin-bottom: 8px;
        }
        
        .company-sub {
            font-size: 0.85em;
            color: var(--medium-gray);
            letter-spacing: 3px;
            text-transform: uppercase;
            font-weight: 400;
        }
        
        .doc-meta {
            text-align: right;
        }
        
        .doc-label {
            display: inline-block;
            background: var(--charcoal);
            color: var(--white);
            padding: 8px 20px;
            font-size: 0.75em;
            letter-spacing: 2px;
            text-transform: uppercase;
            font-weight: 600;
            margin-bottom: 15px;
        }
        
        .doc-number {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.8em;
            font-weight: 600;
            color: var(--accent);
            letter-spacing: 2px;
        }
        
        .doc-date {
            color: var(--medium-gray);
            font-size: 0.9em;
            margin-top: 8px;
        }
        
        /* Navegaci√≥n */
        .nav-tabs {
            display: flex;
            background: var(--off-white);
            border-bottom: 1px solid var(--border-gray);
            padding: 0 60px;
        }
        
        .nav-tab {
            padding: 18px 30px;
            background: transparent;
            border: none;
            color: var(--medium-gray);
            font-size: 0.8em;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.3s;
            border-bottom: 2px solid transparent;
            margin-bottom: -1px;
        }
        
        .nav-tab:hover {
            color: var(--charcoal);
        }
        
        .nav-tab.active {
            color: var(--charcoal);
            border-bottom-color: var(--accent);
            background: var(--white);
        }
        
        /* Contenido */
        .doc-content {
            padding: 40px 60px;
        }
        
        .section-content {
            display: none;
        }
        
        .section-content.active {
            display: block;
            animation: fadeIn 0.4s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* Cards de Secci√≥n */
        .section-card {
            background: var(--white);
            border: 1px solid var(--border-gray);
            border-radius: 4px;
            margin-bottom: 30px;
            overflow: hidden;
        }
        
        .card-header {
            background: var(--off-white);
            padding: 20px 25px;
            border-bottom: 1px solid var(--border-gray);
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .card-icon {
            width: 36px;
            height: 36px;
            background: var(--white);
            border: 1px solid var(--border-gray);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1em;
        }
        
        .card-title-group h3 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.2em;
            font-weight: 600;
            color: var(--black);
            margin-bottom: 3px;
        }
        
        .card-title-group p {
            font-size: 0.8em;
            color: var(--medium-gray);
        }
        
        .card-body {
            padding: 25px;
        }
        
        /* Grid de Inputs */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 25px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .form-label {
            font-size: 0.75em;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--medium-gray);
            font-weight: 500;
        }
        
        .form-input {
            padding: 12px 15px;
            border: 1px solid var(--border-gray);
            border-radius: 4px;
            font-size: 0.95em;
            color: var(--charcoal);
            background: var(--white);
            transition: all 0.3s;
            font-family: 'Inter', sans-serif;
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(201, 169, 98, 0.1);
        }
        
        .form-input::placeholder {
            color: var(--medium-gray);
        }
        
        /* Ruta Comercial */
        .route-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 40px;
            padding: 30px;
            background: var(--off-white);
            border: 1px solid var(--border-gray);
            border-radius: 4px;
            margin-bottom: 30px;
        }
        
        .route-box {
            text-align: center;
            flex: 1;
            max-width: 200px;
        }
        
        .route-flag {
            font-size: 2.5em;
            margin-bottom: 10px;
            display: block;
        }
        
        .route-country {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.3em;
            font-weight: 600;
            color: var(--black);
            margin-bottom: 5px;
        }
        
        .route-port {
            font-size: 0.85em;
            color: var(--medium-gray);
            font-family: 'Inter', monospace;
        }
        
        .route-divider {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--accent);
        }
        
        .route-line {
            width: 60px;
            height: 1px;
            background: var(--accent);
            margin: 8px 0;
        }
        
        /* Selector de Categor√≠a */
        .category-selector {
            margin-bottom: 25px;
        }
        
        .category-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }
        
        .category-item {
            background: var(--white);
            border: 1px solid var(--border-gray);
            border-radius: 4px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .category-item:hover {
            border-color: var(--accent);
            background: var(--off-white);
        }
        
        .category-item.active {
            border-color: var(--accent);
            background: var(--accent-light);
            position: relative;
        }
        
        .category-item.active::after {
            content: '‚úì';
            position: absolute;
            top: -8px;
            right: -8px;
            width: 20px;
            height: 20px;
            background: var(--accent);
            color: var(--white);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7em;
            font-weight: 600;
        }
        
        .cat-icon {
            font-size: 1.8em;
            margin-bottom: 8px;
            display: block;
        }
        
        .cat-name {
            font-size: 0.8em;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--charcoal);
        }
        
        .selected-category-box {
            display: none;
            background: var(--charcoal);
            color: var(--white);
            padding: 20px 25px;
            border-radius: 4px;
            margin-top: 20px;
        }
        
        .selected-category-box.show {
            display: block;
        }
        
        .sel-cat-label {
            font-size: 0.75em;
            text-transform: uppercase;
            letter-spacing: 2px;
            opacity: 0.7;
            margin-bottom: 5px;
        }
        
        .sel-cat-value {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.5em;
            font-weight: 600;
        }
        
        /* Configuraci√≥n Comercial */
        .config-row {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .config-box {
            background: var(--off-white);
            border: 1px solid var(--border-gray);
            border-radius: 4px;
            padding: 25px;
            text-align: center;
        }
        
        .config-label {
            font-size: 0.75em;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--medium-gray);
            margin-bottom: 15px;
        }
        
        .config-input-group {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .config-input {
            width: 80px;
            padding: 10px;
            border: 1px solid var(--border-gray);
            border-radius: 4px;
            text-align: center;
            font-size: 1.2em;
            font-weight: 600;
            color: var(--charcoal);
            background: var(--white);
        }
        
        .config-input:focus {
            outline: none;
            border-color: var(--accent);
        }
        
        .config-unit {
            font-size: 1.1em;
            color: var(--medium-gray);
            font-weight: 500;
        }
        
        .config-desc {
            font-size: 0.8em;
            color: var(--medium-gray);
            margin-top: 10px;
        }
        
        /* Tabla de Productos */
        .table-section {
            border: 1px solid var(--border-gray);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 25px;
        }
        
        .table-toolbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: var(--off-white);
            border-bottom: 1px solid var(--border-gray);
        }
        
        .toolbar-title {
            font-size: 0.9em;
            font-weight: 600;
            color: var(--charcoal);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .toolbar-actions {
            display: flex;
            gap: 10px;
        }
        
        .btn {
            padding: 8px 16px;
            border-radius: 4px;
            font-size: 0.8em;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }
        
        .btn-primary {
            background: var(--charcoal);
            color: var(--white);
        }
        
        .btn-primary:hover {
            background: var(--black);
        }
        
        .btn-secondary {
            background: var(--white);
            color: var(--dark-gray);
            border: 1px solid var(--border-gray);
        }
        
        .btn-secondary:hover {
            border-color: var(--accent);
            color: var(--charcoal);
        }
        
        .btn-accent {
            background: var(--accent);
            color: var(--white);
        }
        
        .btn-accent:hover {
            background: #b8944f;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9em;
        }
        
        thead {
            background: var(--off-white);
        }
        
        th {
            padding: 15px;
            text-align: left;
            font-weight: 600;
            font-size: 0.75em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--dark-gray);
            border-bottom: 1px solid var(--border-gray);
        }
        
        td {
            padding: 12px 15px;
            border-bottom: 1px solid var(--border-gray);
            background: var(--white);
        }
        
        tbody tr:hover td {
            background: var(--off-white);
        }
        
        .cell-input {
            width: 100%;
            padding: 8px 10px;
            border: 1px solid transparent;
            border-radius: 3px;
            font-size: 0.9em;
            color: var(--charcoal);
            background: transparent;
            transition: all 0.3s;
        }
        
        .cell-input:focus {
            outline: none;
            border-color: var(--accent);
            background: var(--white);
        }
        
        .cell-input.number {
            text-align: right;
            font-family: 'Inter', monospace;
            font-weight: 500;
        }
        
        .cell-total {
            font-family: 'Inter', monospace;
            font-weight: 600;
            color: var(--charcoal);
        }
        
        .delete-btn {
            width: 28px;
            height: 28px;
            border: 1px solid var(--border-gray);
            background: var(--white);
            color: var(--danger);
            border-radius: 4px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
        }
        
        .delete-btn:hover {
            background: var(--danger);
            color: var(--white);
            border-color: var(--danger);
        }
        
        /* Resumen de Totales */
        .totals-section {
            background: var(--charcoal);
            color: var(--white);
            padding: 35px;
            border-radius: 4px;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 30px;
        }
        
        .total-item {
            text-align: center;
            position: relative;
        }
        
        .total-item:not(:last-child)::after {
            content: '';
            position: absolute;
            right: -15px;
            top: 20%;
            height: 60%;
            width: 1px;
            background: rgba(255,255,255,0.2);
        }
        
        .total-label {
            font-size: 0.7em;
            text-transform: uppercase;
            letter-spacing: 2px;
            opacity: 0.7;
            margin-bottom: 8px;
        }
        
        .total-value {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.6em;
            font-weight: 600;
        }
        
        .total-grand-section {
            grid-column: span 4;
            border-top: 1px solid rgba(255,255,255,0.2);
            padding-top: 25px;
            margin-top: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .total-grand-label {
            font-size: 0.8em;
            text-transform: uppercase;
            letter-spacing: 3px;
            opacity: 0.8;
        }
        
        .total-grand-value {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2.5em;
            font-weight: 700;
            color: var(--accent);
        }
        
        /* An√°lisis Financiero */
        .analysis-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .analysis-card {
            background: var(--white);
            border: 1px solid var(--border-gray);
            border-radius: 4px;
            padding: 30px;
        }
        
        .analysis-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-gray);
        }
        
        .analysis-title {
            font-size: 0.8em;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--medium-gray);
            font-weight: 500;
        }
        
        .analysis-icon {
            width: 40px;
            height: 40px;
            background: var(--off-white);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
        }
        
        .analysis-value {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2.2em;
            font-weight: 600;
            color: var(--charcoal);
            margin-bottom: 10px;
        }
        
        .analysis-desc {
            font-size: 0.85em;
            color: var(--medium-gray);
            line-height: 1.6;
        }
        
        /* T√©rminos Legales */
        .terms-box {
            background: var(--off-white);
            border-left: 4px solid var(--accent);
            padding: 25px 30px;
            border-radius: 0 4px 4px 0;
        }
        
        .terms-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.2em;
            font-weight: 600;
            color: var(--charcoal);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .terms-content {
            font-size: 0.9em;
            color: var(--dark-gray);
            line-height: 2;
        }
        
        .terms-content strong {
            color: var(--charcoal);
        }
        
        /* Footer */
        .doc-footer {
            background: var(--off-white);
            padding: 40px 60px;
            border-top: 1px solid var(--border-gray);
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 40px;
        }
        
        .footer-col h4 {
            font-size: 0.75em;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--medium-gray);
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .footer-col p {
            font-size: 0.9em;
            color: var(--dark-gray);
            line-height: 1.8;
        }
        
        .footer-col strong {
            color: var(--charcoal);
            font-weight: 600;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .doc-header { padding: 30px; }
            .company-name { font-size: 1.8em; }
            .doc-content { padding: 30px; }
            .form-grid { grid-template-columns: 1fr; }
            .category-grid { grid-template-columns: repeat(2, 1fr); }
            .config-row { grid-template-columns: 1fr; }
            .totals-section { grid-template-columns: repeat(2, 1fr); }
            .total-item:not(:last-child)::after { display: none; }
            .total-grand-section { grid-column: span 2; flex-direction: column; gap: 10px; }
            .analysis-grid { grid-template-columns: 1fr; }
            .doc-footer { grid-template-columns: 1fr; padding: 30px; }
            .nav-tabs { padding: 0 30px; overflow-x: auto; }
        }
        
        /* Print Styles */
        @media print {
            body { background: white; padding: 0; }
            .document { box-shadow: none; border: none; }
            .no-print { display: none !important; }
            .category-selector { display: none !important; }
            .selected-category-box { display: block !important; background: #333 !important; color: white !important; }
            .nav-tabs { display: none !important; }
            .section-content { display: block !important; }
            .totals-section { background: #333 !important; color: white !important; -webkit-print-color-adjust: exact; }
            .btn { display: none !important; }
            .table-toolbar { display: none !important; }
        }
    </style>
</head>
<body>
    <div class="document">
        <!-- Header -->
        <div class="doc-header">
            <div class="header-content">
                <div class="brand-section">
                    <h1 class="company-name">Industrias Tobias</h1>
                    <div class="company-sub">A Family Company ‚Ä¢ Belleza & Moda</div>
                </div>
                <div class="doc-meta">
                    <div class="doc-label">Proforma Comercial</div>
                    <div class="doc-number" id="invoiceNum">PI-2024-001</div>
                    <div class="doc-date" id="currentDate">12 de Febrero, 2024</div>
                </div>
            </div>
        </div>
        
        <!-- Navegaci√≥n -->
        <div class="nav-tabs no-print">
            <button class="nav-tab active" onclick="showSection('general')">General</button>
            <button class="nav-tab" onclick="showSection('productos')">Productos & Lotes</button>
            <button class="nav-tab" onclick="showSection('financiero')">An√°lisis Financiero</button>
        </div>
        
        <!-- Contenido -->
        <div class="doc-content">
            <!-- Secci√≥n General -->
            <div id="general" class="section-content active">
                <!-- Ruta Comercial -->
                <div class="route-container">
                    <div class="route-box">
                        <span class="route-flag">üá∫üá∏</span>
                        <div class="route-country">Estados Unidos</div>
                        <div class="route-port">Port of Miami, FL</div>
                    </div>
                    <div class="route-divider">
                        <div class="route-line"></div>
                        <span style="font-size: 1.2em;">‚Üí</span>
                        <div class="route-line"></div>
                    </div>
                    <div class="route-box">
                        <span class="route-flag">üá∏üáª</span>
                        <div class="route-country">El Salvador</div>
                        <div class="route-port">Port of Acajutla</div>
                    </div>
                </div>
                
                <!-- Datos del Importador -->
                <div class="section-card">
                    <div class="card-header">
                        <div class="card-icon">üë§</div>
                        <div class="card-title-group">
                            <h3>Datos del Importador</h3>
                            <p>Informaci√≥n del consignee</p>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Raz√≥n Social / Company Name</label>
                                <input type="text" class="form-input" placeholder="Distribuidora Ejecutiva S.A. de C.V.">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Tax ID / NIT / RUC</label>
                                <input type="text" class="form-input" placeholder="0614-010190-001-0">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Contacto / Buyer</label>
                                <input type="text" class="form-input" placeholder="Lic. Roberto Gonz√°lez">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Email Corporativo</label>
                                <input type="email" class="form-input" placeholder="compras@empresa.com">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Tel√©fono / WhatsApp</label>
                                <input type="tel" class="form-input" placeholder="+503 7777-8888">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Direcci√≥n de Entrega</label>
                                <input type="text" class="form-input" placeholder="Av. Las Magnolias #123, San Salvador">
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- T√©rminos de Negocio -->
                <div class="section-card">
                    <div class="card-header">
                        <div class="card-icon">üìã</div>
                        <div class="card-title-group">
                            <h3>T√©rminos de Negocio</h3>
                            <p>Condiciones comerciales</p>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Incoterm</label>
                                <input type="text" class="form-input" value="FOB (Free On Board)" readonly style="background: var(--off-white); font-weight: 500;">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Moneda / Currency</label>
                                <input type="text" class="form-input" value="USD - US Dollar" readonly style="background: var(--off-white);">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Condiciones de Pago</label>
                                <input type="text" class="form-input" value="T/T Wire Transfer (30% Advance)" readonly style="background: var(--off-white);">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Tiempo de Entrega</label>
                                <input type="text" class="form-input" placeholder="30-45 d√≠as h√°biles">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Secci√≥n Productos -->
            <div id="productos" class="section-content">
                <!-- Selector de Categor√≠a -->
                <div class="section-card no-print">
                    <div class="card-header">
                        <div class="card-icon">üè∑Ô∏è</div>
                        <div class="card-title-group">
                            <h3>Categor√≠a de Producto</h3>
                            <p>Seleccione la l√≠nea de negocio</p>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="category-grid">
                            <div class="category-item" onclick="selectCategory(this, 'Textil')">
                                <span class="cat-icon">üßµ</span>
                                <span class="cat-name">Textil</span>
                            </div>
                            <div class="category-item" onclick="selectCategory(this, 'Calzado')">
                                <span class="cat-icon">üëû</span>
                                <span class="cat-name">Calzado</span>
                            </div>
                            <div class="category-item" onclick="selectCategory(this, 'Accesorios')">
                                <span class="cat-icon">üëú</span>
                                <span class="cat-name">Accesorios</span>
                            </div>
                            <div class="category-item" onclick="selectCategory(this, 'Maquillaje')">
                                <span class="cat-icon">üíÑ</span>
                                <span class="cat-name">Maquillaje</span>
                            </div>
                            <div class="category-item" onclick="selectCategory(this, 'Hogar')">
                                <span class="cat-icon">üè†</span>
                                <span class="cat-name">Hogar</span>
                            </div>
                            <div class="category-item" onclick="selectCategory(this, 'Industrial')">
                                <span class="cat-icon">‚öôÔ∏è</span>
                                <span class="cat-name">Industrial</span>
                            </div>
                            <div class="category-item" onclick="selectCategory(this, 'Materia Prima')">
                                <span class="cat-icon">üß∂</span>
                                <span class="cat-name">Materia Prima</span>
                            </div>
                            <div class="category-item" onclick="selectCategory(this, 'Otros')">
                                <span class="cat-icon">üì¶</span>
                                <span class="cat-name">Otros</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Categor√≠a Seleccionada (Visible en impresi√≥n) -->
                <div id="selectedCategoryBox" class="selected-category-box">
                    <div class="sel-cat-label">Categor√≠a Seleccionada</div>
                    <div class="sel-cat-value" id="selectedCatName">No seleccionada</div>
                </div>
                
                <!-- Configuraci√≥n Comercial -->
                <div class="config-row">
                    <div class="config-box">
                        <div class="config-label">Comisi√≥n por Venta</div>
                        <div class="config-input-group">
                            <input type="number" class="config-input" id="commissionRate" value="10" min="0" max="100" onchange="updateCalculations()">
                            <span class="config-unit">%</span>
                        </div>
                        <div class="config-desc">Sobre el total FOB</div>
                    </div>
                    <div class="config-box">
                        <div class="config-label">Descuento por Lote</div>
                        <div class="config-input-group">
                            <input type="number" class="config-input" id="lotDiscount" value="5" min="0" max="100" onchange="updateCalculations()">
                            <span class="config-unit">%</span>
                        </div>
                        <div class="config-desc">Aplica en compras > $10,000</div>
                    </div>
                    <div class="config-box">
                        <div class="config-label">Cantidad M√≠nima Lote</div>
                        <div class="config-input-group">
                            <input type="number" class="config-input" id="minLotQty" value="100" min="1" onchange="updateCalculations()">
                            <span class="config-unit">unids</span>
                        </div>
                        <div class="config-desc">Para precio preferencial</div>
                    </div>
                </div>
                
                <!-- Tabla de Productos -->
                <div class="table-section">
                    <div class="table-toolbar no-print">
                        <div class="toolbar-title">
                            <span>üì¶</span>
                            Detalle de Productos
                        </div>
                        <div class="toolbar-actions">
                            <button class="btn btn-primary" onclick="addRow()">
                                <span>+</span> Agregar
                            </button>
                            <button class="btn btn-secondary" onclick="clearAll()">
                                <span>√ó</span> Limpiar
                            </button>
                            <button class="btn btn-accent" onclick="window.print()">
                                <span>üñ®Ô∏è</span> Imprimir
                            </button>
                        </div>
                    </div>
                    
                    <table id="productTable">
                        <thead>
                            <tr>
                                <th style="width: 50px;">No.</th>
                                <th>SKU / Descripci√≥n</th>
                                <th style="width: 90px;">Cantidad</th>
                                <th style="width: 110px;">Precio Unit.</th>
                                <th style="width: 90px;">Peso (kg)</th>
                                <th style="width: 110px;">Subtotal</th>
                                <th style="width: 50px;" class="no-print"></th>
                            </tr>
                        </thead>
                        <tbody id="tableBody">
                            <!-- Filas din√°micas -->
                        </tbody>
                    </table>
                </div>
                
                <!-- Totales -->
                <div class="totals-section">
                    <div class="total-item">
                        <div class="total-label">Subtotal</div>
                        <div class="total-value" id="subtotalDisplay">$0.00</div>
                    </div>
                    <div class="total-item">
                        <div class="total-label">Descuento Lote</div>
                        <div class="total-value" id="discountDisplay" style="color: #f87171;">-$0.00</div>
                    </div>
                    <div class="total-item">
                        <div class="total-label">Comisi√≥n</div>
                        <div class="total-value" id="commissionDisplay">$0.00</div>
                    </div>
                    <div class="total-item">
                        <div class="total-label">Total FOB</div>
                        <div class="total-value" id="fobDisplay">$0.00</div>
                    </div>
                    <div class="total-grand-section">
                        <div class="total-grand-label">Total a Pagar</div>
                        <div class="total-grand-value" id="grandTotalDisplay">$0.00</div>
                    </div>
                </div>
            </div>
            
            <!-- Secci√≥n Financiera -->
            <div id="financiero" class="section-content">
                <div class="analysis-grid">
                    <div class="analysis-card">
                        <div class="analysis-header">
                            <div class="analysis-title">Costo de Mercanc√≠a</div>
                            <div class="analysis-icon">üí∞</div>
                        </div>
                        <div class="analysis-value" id="analysisCost">$0.00</div>
                        <div class="analysis-desc">
                            Valor total de productos antes de comisiones y descuentos. FOB Miami sin gastos adicionales.
                        </div>
                    </div>
                    <div class="analysis-card">
                        <div class="analysis-header">
                            <div class="analysis-title">Margen de Comisi√≥n</div>
                            <div class="analysis-icon">üìä</div>
                        </div>
                        <div class="analysis-value" id="analysisMargin">0%</div>
                        <div class="analysis-desc">
                            Porcentaje de comisi√≥n aplicada sobre el total de la operaci√≥n comercial.
                        </div>
                    </div>
                    <div class="analysis-card">
                        <div class="analysis-header">
                            <div class="analysis-title">Ahorro por Volumen</div>
                            <div class="analysis-icon">üéØ</div>
                        </div>
                        <div class="analysis-value" id="analysisSavings" style="color: var(--success);">$0.00</div>
                        <div class="analysis-desc">
                            Descuento autom√°tico aplicado por compra en volumen o cantidades superiores al m√≠nimo de lote.
                        </div>
                    </div>
                    <div class="analysis-card">
                        <div class="analysis-header">
                            <div class="analysis-title">Valor Total Negocio</div>
                            <div class="analysis-icon">‚ö°</div>
                        </div>
                        <div class="analysis-value" id="analysisTotal">$0.00</div>
                        <div class="analysis-desc">
                            Monto final incluyendo todos los conceptos. Listo para procesar transferencia bancaria.
                        </div>
                    </div>
                </div>
                
                <!-- T√©rminos -->
                <div class="terms-box">
                    <div class="terms-title">
                        <span style="color: var(--accent);">‚óÜ</span> Condiciones Legales y Comerciales
                    </div>
                    <div class="terms-content">
                        <strong>Validez:</strong> 30 d√≠as calendario desde la fecha de emisi√≥n. Precios sujetos a fluctuaci√≥n cambiaria.<br>
                        <strong>Pago:</strong> 30% anticipo para confirmar orden, 70% contra documentos de embarque (B/L, Invoice, Packing List).<br>
                        <strong>Comisi√≥n:</strong> Calculada sobre el total FOB final. Pagadera a la firma del contrato de compraventa.<br>
                        <strong>Descuento por Lote:</strong> Aplica autom√°ticamente en compras superiores a $10,000 USD o cantidades mayores al m√≠nimo establecido.<br>
                        <strong>Entrega:</strong> 30-45 d√≠as h√°biles desde confirmaci√≥n de pago inicial y documentaci√≥n completa.<br>
                        <strong>Garant√≠a:</strong> Cubre defectos de f√°brica √∫nicamente. No aplica por mal manejo en transporte o almacenaje.
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <div class="doc-footer">
            <div class="footer-col">
                <h4>Exportador</h4>
                <p>
                    <strong>Industrias Tobias S.A.</strong><br>
                    350 Fifth Avenue, Suite 2500<br>
                    New York, NY 10118, USA<br>
                    Registro Federal: 98-7654321
                </p>
            </div>
            <div class="footer-col">
                <h4>Contacto Comercial</h4>
                <p>
                    üìß industriastobias@gmail.com<br>
                    üìû +1 (212) 555-0147<br>
                    üåê www.industriastobias.com<br>
                    Lic. Carlos Mendoza (Gerente)
                </p>
            </div>
            <div class="footer-col">
                <h4>Informaci√≥n Bancaria</h4>
                <p>
                    <strong>JPMorgan Chase Bank, N.A.</strong><br>
                    Cuenta: 000123456789<br>
                    SWIFT: CHASUS33<br>
                    ABA Routing: 021000021
                </p>
            </div>
        </div>
    </div>

    <script>
        let selectedCategory = '';
        let rowCount = 0;
        
        window.onload = function() {
            const date = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('currentDate').textContent = date.toLocaleDateString('es-ES', options);
            
            const invNum = Math.floor(Math.random() * 900) + 100;
            document.getElementById('invoiceNum').textContent = `PI-2024-${invNum}`;
            
            addRow();
            updateCalculations();
        };
        
        function showSection(sectionId) {
            document.querySelectorAll('.section-content').forEach(sec => sec.classList.remove('active'));
            document.querySelectorAll('.nav-tab').forEach(tab => tab.classList.remove('active'));
            
            document.getElementById(sectionId).classList.add('active');
            event.target.classList.add('active');
        }
        
        function selectCategory(element, category) {
            document.querySelectorAll('.category-item').forEach(item => item.classList.remove('active'));
            element.classList.add('active');
            selectedCategory = category;
            
            document.getElementById('selectedCatName').textContent = category;
            document.getElementById('selectedCategoryBox').classList.add('show');
        }
        
        function addRow() {
            rowCount++;
            const tbody = document.getElementById('tableBody');
            const row = document.createElement('tr');
            row.id = `row-${rowCount}`;
            
            row.innerHTML = `
                <td style="text-align: center; color: var(--medium-gray); font-weight: 500;">${rowCount}</td>
                <td><input type="text" class="cell-input" placeholder="SKU-001 / Descripci√≥n del producto" id="desc-${rowCount}"></td>
                <td><input type="number" class="cell-input number" placeholder="0" min="0" id="qty-${rowCount}" onchange="calculateRow(${rowCount})"></td>
                <td><input type="number" class="cell-input number" placeholder="0.00" min="0" step="0.01" id="price-${rowCount}" onchange="calculateRow(${rowCount})"></td>
                <td><input type="number" class="cell-input number" placeholder="0.00" min="0" step="0.01" id="weight-${rowCount}"></td>
                <td class="cell-total" id="subtotal-${rowCount}">$0.00</td>
                <td class="no-print" style="text-align: center;"><button class="delete-btn" onclick="deleteRow(${rowCount})">√ó</button></td>
            `;
            
            tbody.appendChild(row);
            setTimeout(() => document.getElementById(`desc-${rowCount}`).focus(), 100);
        }
        
        function deleteRow(id) {
            const row = document.getElementById(`row-${id}`);
            row.style.opacity = '0';
            setTimeout(() => {
                row.remove();
                recalculateNumbers();
                updateCalculations();
            }, 300);
        }
        
        function recalculateNumbers() {
            const rows = document.querySelectorAll('#tableBody tr');
            rows.forEach((row, index) => {
                row.cells[0].textContent = index + 1;
            });
            rowCount = rows.length;
        }
        
        function calculateRow(id) {
            const qty = parseFloat(document.getElementById(`qty-${id}`).value) || 0;
            const price = parseFloat(document.getElementById(`price-${id}`).value) || 0;
            const subtotal = qty * price;
            
            document.getElementById(`subtotal-${id}`).textContent = '$' + subtotal.toLocaleString('en-US', {
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            });
            
            updateCalculations();
        }
        
        function updateCalculations() {
            let subtotal = 0;
            let totalQty = 0;
            
            for (let i = 1; i <= rowCount; i++) {
                const qty = parseFloat(document.getElementById(`qty-${i}`)?.value) || 0;
                const price = parseFloat(document.getElementById(`price-${i}`)?.value) || 0;
                subtotal += (qty * price);
                totalQty += qty;
            }
            
            const commissionRate = parseFloat(document.getElementById('commissionRate').value) || 0;
            const lotDiscount = parseFloat(document.getElementById('lotDiscount').value) || 0;
            const minLotQty = parseFloat(document.getElementById('minLotQty').value) || 0;
            
            let discount = 0;
            if (subtotal > 10000 || totalQty >= minLotQty) {
                discount = subtotal * (lotDiscount / 100);
            }
            
            const commission = subtotal * (commissionRate / 100);
            const fobTotal = subtotal - discount + commission;
            
            const formatMoney = (val) => '$' + val.toLocaleString('en-US', {
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            });
            
            document.getElementById('subtotalDisplay').textContent = formatMoney(subtotal);
            document.getElementById('discountDisplay').textContent = '-' + formatMoney(discount);
            document.getElementById('commissionDisplay').textContent = formatMoney(commission);
            document.getElementById('fobDisplay').textContent = formatMoney(fobTotal);
            document.getElementById('grandTotalDisplay').textContent = formatMoney(fobTotal);
            
            document.getElementById('analysisCost').textContent = formatMoney(subtotal);
            document.getElementById('analysisMargin').textContent = commissionRate + '%';
            document.getElementById('analysisSavings').textContent = formatMoney(discount);
            document.getElementById('analysisTotal').textContent = formatMoney(fobTotal);
        }
        
        function clearAll() {
            if(confirm('¬øEliminar todas las l√≠neas de productos?')) {
                document.getElementById('tableBody').innerHTML = '';
                rowCount = 0;
                addRow();
                updateCalculations();
            }
        }
        
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && e.target.classList.contains('cell-input')) {
                e.preventDefault();
                const inputs = Array.from(document.querySelectorAll('.cell-input'));
                const currentIndex = inputs.indexOf(e.target);
                if (currentIndex < inputs.length - 1) {
                    inputs[currentIndex + 1].focus();
                } else {
                    addRow();
                }
            }
        });
    </script>
</body>
</html>
