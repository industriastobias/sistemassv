<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Almacén - KLOHESV</title>
  <style>
    :root{--bg:#fafafa;--card:#fff;--text:#000;--accent:#2563eb;--radius:12px;--shadow:0 4px 12px rgba(0,0,0,.08)}
    [data-theme="dark"]{--bg:#121212;--card:#1e1e1e;--text:#fff;--accent:#3b82f6}
    body{margin:0;font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);padding:40px}
    h1{margin-bottom:20px}
    .catalog{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:20px}
    .product{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:16px;text-align:center}
    .product img{width:100%;height:150px;object-fit:cover;border-radius:8px}
    .product h3{margin:10px 0 6px;font-size:1rem}
    .product p{margin:4px 0;font-size:.9rem}
    .product button{margin-top:10px;padding:8px 14px;border:none;border-radius:8px;background:var(--accent);color:#fff;cursor:pointer}
  </style>
</head>
<body>

  <h1>Almacén - Marcar como Vendido</h1>

  <div class="catalog" id="catalog"></div>

  <script>
    const productos = [
      {
        codigo: "K001",
        nombre: "Camiseta KLOHESV Negra",
        precio: 15.00,
        imagen: "https://via.placeholder.com/300x200?text=Camiseta+Negra"
      },
      {
        codigo: "K002",
        nombre: "Camiseta KLOHESV Blanca",
        precio: 15.00,
        imagen: "https://via.placeholder.com/300x200?text=Camiseta+Blanca"
      },
      {
        codigo: "K003",
        nombre: "Sudadera KLOHESV Gris",
        precio: 25.00,
        imagen: "https://via.placeholder.com/300x200?text=Sudadera+Gris"
      }
    ];

    function renderCatalogo() {
      const catalogo = document.getElementById('catalog');
      catalogo.innerHTML = productos.map(p => `
        <div class="product">
          <img src="${p.imagen}" alt="${p.nombre}">
          <h3>${p.nombre}</h3>
          <p><strong>$${p.precio.toFixed(2)} USD</strong></p>
          <p>Código: ${p.codigo}</p>
          <button onclick="marcarVendido('${p.codigo}')">Marcar como Vendido</button>
        </div>
      `).join('');
    }

    function marcarVendido(codigo) {
      const producto = productos.find(p => p.codigo === codigo);
      const cantidad = prompt(`¿Cuántas unidades de "${producto.nombre}" se vendieron?`, "1");
      if (!cantidad || isNaN(cantidad) || parseInt(cantidad) <= 0) return;

      const venta = {
        name: producto.nombre,
        code: producto.codigo,
        price: producto.precio,
        quantity: parseInt(cantidad),
        total: producto.precio * parseInt(cantidad),
        image: producto.imagen
      };

      let soldInventory = JSON.parse(localStorage.getItem('soldInventory')) || [];
      soldInventory.push(venta);
      localStorage.setItem('soldInventory', JSON.stringify(soldInventory));

      alert(`✅ Venta registrada: ${producto.nombre} x${cantidad}`);
    }

    window.addEventListener('DOMContentLoaded', renderCatalogo);
  </script>
</body>
</html>
