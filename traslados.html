<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gesti√≥n de Traslados - Control de Costos</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/localforage/1.10.0/localforage.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
            padding: 30px;
        }

        @media (max-width: 968px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        .form-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .form-section h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.5em;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
            font-size: 0.95em;
        }

        .form-group input, .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .image-preview {
            width: 100%;
            height: 200px;
            border: 3px dashed #667eea;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 10px;
            background: #fff;
            overflow: hidden;
            position: relative;
        }

        .image-preview img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        .image-preview .placeholder {
            color: #667eea;
            font-size: 3em;
        }

        .image-preview .remove-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #ff4757;
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            display: none;
            font-size: 1.2em;
        }

        .image-preview.has-image .remove-btn {
            display: block;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            width: 100%;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-danger {
            background: #ff4757;
            color: white;
        }

        .btn-success {
            background: #2ed573;
            color: white;
        }

        .btn-warning {
            background: #ffa502;
            color: white;
        }

        .products-section {
            background: #fff;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .products-section h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.5em;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .summary-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .summary-card h3 {
            font-size: 0.9em;
            margin-bottom: 10px;
            opacity: 0.9;
        }

        .summary-card .value {
            font-size: 1.8em;
            font-weight: bold;
        }

        .summary-card.profit {
            background: linear-gradient(135deg, #2ed573 0%, #1e90ff 100%);
        }

        .summary-card.loss {
            background: linear-gradient(135deg, #ff4757 0%, #ff6348 100%);
        }

        .products-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            font-size: 0.9em;
        }

        .products-table th {
            background: #667eea;
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        .products-table td {
            padding: 15px;
            border-bottom: 1px solid #eee;
        }

        .products-table tr:hover {
            background: #f8f9fa;
        }

        .product-image {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .product-image:hover {
            transform: scale(1.1);
        }

        .action-btns {
            display: flex;
            gap: 5px;
        }

        .action-btns .btn {
            padding: 8px 12px;
            font-size: 0.8em;
        }

        .global-costs {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .global-costs h3 {
            color: #856404;
            margin-bottom: 15px;
        }

        .global-costs-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }

        .empty-state i {
            font-size: 4em;
            margin-bottom: 20px;
            color: #ddd;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 20px;
            border-radius: 15px;
            max-width: 90%;
            max-height: 90%;
        }

        .modal-content img {
            max-width: 100%;
            max-height: 80vh;
            border-radius: 10px;
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 30px;
            color: white;
            font-size: 2em;
            cursor: pointer;
        }

        .hidden-input {
            display: none;
        }

        .file-input-label {
            display: block;
            padding: 15px;
            background: #e0e0e0;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px dashed #667eea;
            color: #667eea;
            font-weight: 600;
        }

        .file-input-label:hover {
            background: #667eea;
            color: white;
        }

        @media print {
            .no-print {
                display: none !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üì¶ Sistema de Traslados</h1>
            <p>Gesti√≥n de Productos, Costos y Ganancias</p>
        </div>

        <div class="main-content">
            <div class="form-section">
                <h2>‚ûï Nuevo Producto</h2>
                
                <div class="form-group">
                    <label>Imagen del Producto</label>
                    <input type="file" id="productImage" accept="image/*" class="hidden-input">
                    <label for="productImage" class="file-input-label">
                        üìÅ Seleccionar Imagen
                    </label>
                    <div class="image-preview" id="imagePreview">
                        <span class="placeholder">üì∑</span>
                        <button class="remove-btn" onclick="removeImage()">√ó</button>
                    </div>
                </div>

                <div class="form-group">
                    <label>Nombre del Producto</label>
                    <input type="text" id="productName" placeholder="Ej: Laptop Dell XPS 15">
                </div>

                <div class="form-group">
                    <label>Precio Original (Costo)</label>
                    <input type="number" id="originalPrice" placeholder="0.00" step="0.01" oninput="calculateMargin()">
                </div>

                <div class="form-group">
                    <label>Precio de Venta</label>
                    <input type="number" id="salePrice" placeholder="0.00" step="0.01" oninput="calculateMargin()">
                </div>

                <div class="form-group">
                    <label>Margen de Ganancia (%)</label>
                    <input type="number" id="profitMargin" placeholder="0" readonly style="background: #e9ecef;">
                </div>

                <div class="form-group">
                    <label>Ganancia Neta ($)</label>
                    <input type="number" id="profitAmount" placeholder="0.00" readonly style="background: #e9ecef;">
                </div>

                <button class="btn btn-primary" onclick="addProduct()">
                    üíæ Guardar Producto
                </button>
            </div>

            <div class="products-section">
                <h2>
                    üìã Lista de Productos
                    <div>
                        <button class="btn btn-success no-print" onclick="downloadPDF()">
                            üìÑ Descargar PDF
                        </button>
                        <button class="btn btn-danger no-print" onclick="clearAllData()" style="margin-left: 10px;">
                            üóëÔ∏è Limpiar Todo
                        </button>
                    </div>
                </h2>

                <div class="global-costs">
                    <h3>üåç Costos Globales (Distribuidos entre todos los productos)</h3>
                    <div class="global-costs-row">
                        <div class="form-group">
                            <label>Costo Total de Env√≠o ($)</label>
                            <input type="number" id="totalShipping" placeholder="0.00" step="0.01" oninput="updateGlobalCosts()">
                        </div>
                        <div class="form-group">
                            <label>Pago Total de Impuestos ($)</label>
                            <input type="number" id="totalTaxes" placeholder="0.00" step="0.01" oninput="updateGlobalCosts()">
                        </div>
                    </div>
                </div>

                <div class="summary-cards" id="summaryCards">
                    <div class="summary-card">
                        <h3>Total Invertido</h3>
                        <div class="value" id="totalInvested">$0.00</div>
                    </div>
                    <div class="summary-card">
                        <h3>Total Ventas</h3>
                        <div class="value" id="totalSales">$0.00</div>
                    </div>
                    <div class="summary-card profit">
                        <h3>Ganancia Total</h3>
                        <div class="value" id="totalProfit">$0.00</div>
                    </div>
                    <div class="summary-card">
                        <h3>Costo Env√≠o/Prod</h3>
                        <div class="value" id="shippingPerProduct">$0.00</div>
                    </div>
                    <div class="summary-card">
                        <h3>Impuestos/Prod</h3>
                        <div class="value" id="taxesPerProduct">$0.00</div>
                    </div>
                </div>

                <div id="productsList">
                    <div class="empty-state">
                        <div style="font-size: 4em; margin-bottom: 20px;">üì≠</div>
                        <h3>No hay productos registrados</h3>
                        <p>Agrega tu primer producto usando el formulario</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="imageModal" onclick="closeModal()">
        <span class="modal-close">&times;</span>
        <div class="modal-content">
            <img id="modalImage" src="" alt="Vista previa">
        </div>
    </div>

    <script>
        // Inicializar LocalForage
        localforage.config({
            name: 'TrasladosApp',
            storeName: 'products'
        });

        let products = [];
        let currentImage = null;
        let editingId = null;

        // Cargar datos al iniciar
        window.onload = async function() {
            await loadProducts();
            await loadGlobalCosts();
            renderProducts();
        };

        // Manejar selecci√≥n de imagen
        document.getElementById('productImage').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    currentImage = event.target.result;
                    const preview = document.getElementById('imagePreview');
                    preview.innerHTML = `<img src="${currentImage}" style="max-width: 100%; max-height: 100%;"><button class="remove-btn" onclick="removeImage()" style="display: block;">√ó</button>`;
                    preview.classList.add('has-image');
                };
                reader.readAsDataURL(file);
            }
        });

        function removeImage() {
            currentImage = null;
            document.getElementById('productImage').value = '';
            const preview = document.getElementById('imagePreview');
            preview.innerHTML = '<span class="placeholder">üì∑</span><button class="remove-btn" onclick="removeImage()">√ó</button>';
            preview.classList.remove('has-image');
        }

        function calculateMargin() {
            const original = parseFloat(document.getElementById('originalPrice').value) || 0;
            const sale = parseFloat(document.getElementById('salePrice').value) || 0;
            
            if (original > 0 && sale > 0) {
                const margin = ((sale - original) / original) * 100;
                const profit = sale - original;
                document.getElementById('profitMargin').value = margin.toFixed(2);
                document.getElementById('profitAmount').value = profit.toFixed(2);
            } else {
                document.getElementById('profitMargin').value = '';
                document.getElementById('profitAmount').value = '';
            }
        }

        async function addProduct() {
            const name = document.getElementById('productName').value.trim();
            const originalPrice = parseFloat(document.getElementById('originalPrice').value) || 0;
            const salePrice = parseFloat(document.getElementById('salePrice').value) || 0;
            const margin = parseFloat(document.getElementById('profitMargin').value) || 0;
            const profit = parseFloat(document.getElementById('profitAmount').value) || 0;

            if (!name || originalPrice <= 0 || salePrice <= 0) {
                alert('Por favor completa todos los campos obligatorios');
                return;
            }

            const product = {
                id: editingId || Date.now(),
                name,
                image: currentImage,
                originalPrice,
                salePrice,
                margin,
                profit,
                date: new Date().toLocaleDateString()
            };

            if (editingId) {
                const index = products.findIndex(p => p.id === editingId);
                if (index !== -1) {
                    products[index] = product;
                }
                editingId = null;
            } else {
                products.push(product);
            }

            await localforage.setItem('products', products);
            
            // Limpiar formulario
            document.getElementById('productName').value = '';
            document.getElementById('originalPrice').value = '';
            document.getElementById('salePrice').value = '';
            document.getElementById('profitMargin').value = '';
            document.getElementById('profitAmount').value = '';
            removeImage();

            renderProducts();
            alert('Producto guardado exitosamente');
        }

        async function loadProducts() {
            const saved = await localforage.getItem('products');
            if (saved) {
                products = saved;
            }
        }

        async function loadGlobalCosts() {
            const shipping = await localforage.getItem('totalShipping');
            const taxes = await localforage.getItem('totalTaxes');
            if (shipping) document.getElementById('totalShipping').value = shipping;
            if (taxes) document.getElementById('totalTaxes').value = taxes;
        }

        async function updateGlobalCosts() {
            const shipping = document.getElementById('totalShipping').value;
            const taxes = document.getElementById('totalTaxes').value;
            await localforage.setItem('totalShipping', shipping);
            await localforage.setItem('totalTaxes', taxes);
            renderProducts();
        }

        function renderProducts() {
            const container = document.getElementById('productsList');
            
            if (products.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div style="font-size: 4em; margin-bottom: 20px;">üì≠</div>
                        <h3>No hay productos registrados</h3>
                        <p>Agrega tu primer producto usando el formulario</p>
                    </div>
                `;
                updateSummary();
                return;
            }

            const totalShipping = parseFloat(document.getElementById('totalShipping').value) || 0;
            const totalTaxes = parseFloat(document.getElementById('totalTaxes').value) || 0;
            const shippingPerProduct = products.length > 0 ? totalShipping / products.length : 0;
            const taxesPerProduct = products.length > 0 ? totalTaxes / products.length : 0;

            let html = `
                <table class="products-table">
                    <thead>
                        <tr>
                            <th>Imagen</th>
                            <th>Producto</th>
                            <th>Costo</th>
                            <th>Venta</th>
                            <th>Margen %</th>
                            <th>Ganancia</th>
                            <th>Env√≠o/Prod</th>
                            <th>Impuesto/Prod</th>
                            <th>Ganancia Neta</th>
                            <th class="no-print">Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
            `;

            let totalInvested = 0;
            let totalSales = 0;
            let totalProfit = 0;

            products.forEach(product => {
                const netProfit = product.profit - shippingPerProduct - taxesPerProduct;
                totalInvested += product.originalPrice;
                totalSales += product.salePrice;
                totalProfit += netProfit;

                html += `
                    <tr>
                        <td>
                            ${product.image ? 
                                `<img src="${product.image}" class="product-image" onclick="showImage('${product.image}')">` : 
                                '<span style="color: #ccc; font-size: 2em;">üì¶</span>'}
                        </td>
                        <td><strong>${product.name}</strong></td>
                        <td>$${product.originalPrice.toFixed(2)}</td>
                        <td>$${product.salePrice.toFixed(2)}</td>
                        <td>${product.margin.toFixed(2)}%</td>
                        <td>$${product.profit.toFixed(2)}</td>
                        <td>$${shippingPerProduct.toFixed(2)}</td>
                        <td>$${taxesPerProduct.toFixed(2)}</td>
                        <td style="color: ${netProfit >= 0 ? '#2ed573' : '#ff4757'}; font-weight: bold;">
                            $${netProfit.toFixed(2)}
                        </td>
                        <td class="no-print">
                            <div class="action-btns">
                                <button class="btn btn-warning" onclick="editProduct(${product.id})">‚úèÔ∏è</button>
                                <button class="btn btn-danger" onclick="deleteProduct(${product.id})">üóëÔ∏è</button>
                            </div>
                        </td>
                    </tr>
                `;
            });

            html += '</tbody></table>';
            container.innerHTML = html;

            // Actualizar resumen
            document.getElementById('totalInvested').textContent = `$${totalInvested.toFixed(2)}`;
            document.getElementById('totalSales').textContent = `$${totalSales.toFixed(2)}`;
            document.getElementById('totalProfit').textContent = `$${totalProfit.toFixed(2)}`;
            document.getElementById('shippingPerProduct').textContent = `$${shippingPerProduct.toFixed(2)}`;
            document.getElementById('taxesPerProduct').textContent = `$${taxesPerProduct.toFixed(2)}`;

            // Cambiar color de ganancia total seg√∫n sea positiva o negativa
            const profitCard = document.querySelector('.summary-card.profit');
            if (totalProfit < 0) {
                profitCard.classList.remove('profit');
                profitCard.classList.add('loss');
            } else {
                profitCard.classList.remove('loss');
                profitCard.classList.add('profit');
            }
        }

        function updateSummary() {
            document.getElementById('totalInvested').textContent = '$0.00';
            document.getElementById('totalSales').textContent = '$0.00';
            document.getElementById('totalProfit').textContent = '$0.00';
            const shipping = parseFloat(document.getElementById('totalShipping').value) || 0;
            const taxes = parseFloat(document.getElementById('totalTaxes').value) || 0;
            document.getElementById('shippingPerProduct').textContent = products.length > 0 ? `$${(shipping/products.length).toFixed(2)}` : '$0.00';
            document.getElementById('taxesPerProduct').textContent = products.length > 0 ? `$${(taxes/products.length).toFixed(2)}` : '$0.00';
        }

        function editProduct(id) {
            const product = products.find(p => p.id === id);
            if (!product) return;

            document.getElementById('productName').value = product.name;
            document.getElementById('originalPrice').value = product.originalPrice;
            document.getElementById('salePrice').value = product.salePrice;
            document.getElementById('profitMargin').value = product.margin;
            document.getElementById('profitAmount').value = product.profit;

            if (product.image) {
                currentImage = product.image;
                const preview = document.getElementById('imagePreview');
                preview.innerHTML = `<img src="${currentImage}" style="max-width: 100%; max-height: 100%;"><button class="remove-btn" onclick="removeImage()" style="display: block;">√ó</button>`;
                preview.classList.add('has-image');
            }

            editingId = id;
            window.scrollTo(0, 0);
        }

        async function deleteProduct(id) {
            if (!confirm('¬øEst√°s seguro de eliminar este producto?')) return;
            
            products = products.filter(p => p.id !== id);
            await localforage.setItem('products', products);
            renderProducts();
        }

        async function clearAllData() {
            if (!confirm('¬øEst√°s seguro de eliminar TODOS los productos? Esta acci√≥n no se puede deshacer.')) return;
            
            products = [];
            await localforage.removeItem('products');
            await localforage.removeItem('totalShipping');
            await localforage.removeItem('totalTaxes');
            document.getElementById('totalShipping').value = '';
            document.getElementById('totalTaxes').value = '';
            renderProducts();
        }

        function showImage(src) {
            document.getElementById('modalImage').src = src;
            document.getElementById('imageModal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('imageModal').classList.remove('active');
        }

        async function downloadPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF('l', 'mm', 'a4'); // Landscape
            
            const totalShipping = parseFloat(document.getElementById('totalShipping').value) || 0;
            const totalTaxes = parseFloat(document.getElementById('totalTaxes').value) || 0;
            const shippingPerProduct = products.length > 0 ? totalShipping / products.length : 0;
            const taxesPerProduct = products.length > 0 ? totalTaxes / products.length : 0;

            // T√≠tulo
            doc.setFontSize(20);
            doc.text('Reporte de Traslados - Control de Costos', 15, 20);
            
            // Fecha
            doc.setFontSize(12);
            doc.text(`Fecha: ${new Date().toLocaleDateString()}`, 15, 30);
            
            // Resumen
            let yPos = 45;
            doc.setFontSize(14);
            doc.text('Resumen General:', 15, yPos);
            
            const totalInvested = products.reduce((sum, p) => sum + p.originalPrice, 0);
            const totalSales = products.reduce((sum, p) => sum + p.salePrice, 0);
            const totalNetProfit = products.reduce((sum, p) => sum + (p.profit - shippingPerProduct - taxesPerProduct), 0);

            yPos += 10;
            doc.setFontSize(11);
            doc.text(`Total Invertido: $${totalInvested.toFixed(2)}`, 15, yPos);
            doc.text(`Total en Ventas: $${totalSales.toFixed(2)}`, 80, yPos);
            doc.text(`Ganancia Neta Total: $${totalNetProfit.toFixed(2)}`, 150, yPos);
            
            yPos += 7;
            doc.text(`Costo de Env√≠o Total: $${totalShipping.toFixed(2)}`, 15, yPos);
            doc.text(`Impuestos Totales: $${totalTaxes.toFixed(2)}`, 80, yPos);
            doc.text(`Env√≠o por Producto: $${shippingPerProduct.toFixed(2)}`, 150, yPos);
            doc.text(`Impuestos por Producto: $${taxesPerProduct.toFixed(2)}`, 220, yPos);

            // Tabla de productos
            const tableData = products.map(p => [
                p.name,
                `$${p.originalPrice.toFixed(2)}`,
                `$${p.salePrice.toFixed(2)}`,
                `${p.margin.toFixed(2)}%`,
                `$${p.profit.toFixed(2)}`,
                `$${shippingPerProduct.toFixed(2)}`,
                `$${taxesPerProduct.toFixed(2)}`,
                `$${(p.profit - shippingPerProduct - taxesPerProduct).toFixed(2)}`
            ]);

            doc.autoTable({
                startY: yPos + 15,
                head: [['Producto', 'Costo', 'Venta', 'Margen %', 'Ganancia Bruta', 'Env√≠o/Prod', 'Impuesto/Prod', 'Ganancia Neta']],
                body: tableData,
                theme: 'grid',
                headStyles: { fillColor: [102, 126, 234] },
                styles: { fontSize: 9 },
                columnStyles: {
                    0: { cellWidth: 50 },
                    1: { cellWidth: 25 },
                    2: { cellWidth: 25 },
                    3: { cellWidth: 20 },
                    4: { cellWidth: 30 },
                    5: { cellWidth: 25 },
                    6: { cellWidth: 30 },
                    7: { cellWidth: 30 }
                }
            });

            // Guardar
            doc.save(`Traslados_${new Date().toISOString().split('T')[0]}.pdf`);
        }
    </script>
</body>
</html>
