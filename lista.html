<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Lista - Ingresos y Dashboard</title>
  <style>
    body{font-family:"Inter",Arial,sans-serif;margin:0;padding:2rem;background:#f4f6f8;color:#2c3e50}
    h2{color:#1a73e8}
    .dashboard{display:grid;grid-template-columns:repeat(auto-fit,minmax 200px,1fr);gap:1.5rem;margin-bottom:2rem}
    .card{background:#fff;padding:1.5rem;border-radius:12px;box-shadow:0 3px 10px rgba(0,0,0,.05);text-align:center}
    .card h3{font-size:1rem;color:#888;margin-bottom:.5rem}
    .card p{font-size:1.4rem;font-weight:600;color:#0d47a1}
    table{width:100%;border-collapse:collapse;background:#fff;box-shadow:0 3px 10px rgba(0,0,0,.05);border-radius:12px;overflow:hidden}
    th,td{padding:10px;border-bottom:1px solid #eee;text-align:left;font-size:.9rem}
    th{background:#f8f9fa;color:#555;font-weight:600}
    tr:hover td{background:#f3f6fa}
  </style>
</head>
<body>

<h2>Dashboard</h2>
<div class="dashboard">
  <div class="card"><h3>Total Ingresos</h3><p id="totalIngresos">$0.00</p></div>
</div>

<h2>Ingresos desde Ventas</h2>
<table id="tablaIngresos">
  <thead>
    <tr>
      <th>#</th><th>Fecha</th><th>Descripción</th><th>Categoría</th><th>Monto</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
function $(q){return document.querySelector(q)}
function cargarVentasComoIngresos() {
  const ventas = JSON.parse(localStorage.getItem('soldInventory')) || [];
  const ingresos = ventas.map((v, idx) => ({
    numero: idx + 1,
    fecha: new Date().toISOString().split('T')[0],
    descripcion: `Venta: ${v.name} (Cód: ${v.code})`,
    categoria: 'Venta',
    monto: parseFloat(v.total).toFixed(2)
  }));
  const tbody = $('#tablaIngresos tbody');
  tbody.innerHTML = ingresos.map(i => `
    <tr>
      <td>${i.numero}</td>
      <td>${i.fecha}</td>
      <td>${i.descripcion}</td>
      <td>${i.categoria}</td>
      <td>$${i.monto}</td>
    </tr>`).join('');
  const total = ingresos.reduce((a, i) => a + parseFloat(i.monto), 0);
  $('#totalIngresos').textContent = '$' + total.toFixed(2);
}
cargarVentasComoIngresos();
</script>
</body>
</html>
